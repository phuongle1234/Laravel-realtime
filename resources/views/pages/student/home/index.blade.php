@extends('layouts.student.index')

@section('body_class','homepage navstate_show chrome')
@section('class_main','main_body p-home')

@php
    $_user =  Auth::guard('student')->check()  ? Auth::guard('student')->user() : null;
    $btn_text = "有料会員になる";
    if($_user->stripe->plan_id !== EStripe::FREE_PLAN_ID) $btn_text = "プランを変更する";
@endphp

<!-- section('custom_title')
    <img src="{{ asset('student/common_img/icon_title1.svg') }}" alt="プロフィール">
endsection -->

@section('content')

    @include('component.register.alert')

    <h2 class="tit-main">
            <span>{{ trans('student._home') }}</span>
            <img src="{{ asset('student/common_img/icon_title1.svg') }}" alt="プロフィール">
    </h2>

    <div class="block-profile block-profile-student">

        <div class="item">
            <figure>
                <!-- <div class="img-circle" > -->
                <img class="img-plhd" src="{{ $_user->avatar_img }}" alt="お名前花子">
                <!-- </div > -->
            </figure>
            <span>{{ $_user->name }}</span>
            <a href="{{ route('student.setting.regist') }}">
                <img class="pencil" src="{{ asset('student/images/icon_pencil.png') }}" alt="お名前花子"></a>
        </div>
        <div class="item box-profiles-fix">
            <div class="item-ins yll">
                <div class="box-profiles">
                    <figure><img src="{{ asset('student/images/blocktop_icon1.svg') }}" alt="会員ステータス"></figure>
                    <div class="text">
                        <h3>会員ステータス</h3>
                        <p>{{ EStripe::getPlanNameByPlanID($_user->stripe->plan_id) }}</p>
                    </div>
                </div>
                <a class="btn btn-border" href="{{ route('student.setting.plan_change') }}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="19" viewBox="0 0 32 19" fill="none">
                        <g clip-path="url(#clip0_1092_6259)">
                            <path d="M8.56928 -0.000181404C9.1215 -0.000181404 9.55946 0.307021 9.77844 0.865571C10.2831 2.12231 10.7877 3.36974 11.2732 4.63578C11.3684 4.87782 11.4827 4.97091 11.7588 4.98022C12.4729 4.99884 13.187 5.05469 13.8915 5.11055C14.12 5.12917 14.2247 5.05469 14.3009 4.84058C14.4437 4.43098 14.6151 4.04 14.777 3.6397C14.9959 3.11839 15.3863 2.81119 15.9671 2.80188C16.5193 2.78326 16.9573 3.09977 17.1858 3.64901C17.3571 4.05861 17.5285 4.46822 17.6809 4.87782C17.738 5.04538 17.8141 5.11986 18.0141 5.11055C18.7948 5.05469 19.585 5.02677 20.3658 4.95229C20.48 4.94298 20.6228 4.77542 20.68 4.6544C21.1941 3.39766 21.6892 2.12231 22.2033 0.856262C22.4985 0.139456 23.1935 -0.177055 23.879 0.0836011C24.2694 0.232548 24.5074 0.521132 24.6502 0.902807C25.1358 2.14093 25.6404 3.36974 26.1259 4.60785C26.2212 4.84989 26.3259 4.97091 26.621 4.98022C27.9825 5.04538 29.3536 5.14779 30.7151 5.23157C31.2958 5.26881 31.7052 5.53877 31.9147 6.06939C32.1051 6.57209 31.9528 7.0934 31.4863 7.47508C30.4294 8.34083 29.3726 9.20658 28.3063 10.063C28.1063 10.2213 28.0397 10.3609 28.1158 10.6216C28.4776 11.9528 28.8204 13.2933 29.1536 14.6431C29.3345 15.3599 28.8966 16.0209 28.173 16.1698C27.7826 16.2536 27.4494 16.1326 27.1257 15.9278C25.9736 15.2017 24.8216 14.4849 23.6791 13.7588C23.4982 13.6377 23.3649 13.6284 23.1745 13.7495C22.5842 14.1404 21.9843 14.5128 21.375 14.8759C21.156 15.0062 21.1274 15.1272 21.1941 15.3506C21.3845 16.0209 21.5464 16.7005 21.7273 17.38C21.8701 17.9386 21.7177 18.3947 21.2607 18.7392C20.8133 19.0743 20.2896 19.0743 19.7659 18.7485C18.6139 18.0317 17.4619 17.3149 16.3194 16.5794C16.0813 16.4212 15.9195 16.4398 15.691 16.5887C14.5485 17.3242 13.3964 18.0503 12.2444 18.7578C11.4351 19.2512 10.483 18.8974 10.2735 18.0224C10.2259 17.8269 10.2355 17.6034 10.2831 17.408C10.4544 16.6911 10.6544 15.993 10.8162 15.2762C10.8353 15.1738 10.7877 14.9969 10.702 14.941C10.0641 14.5221 9.41665 14.1032 8.75018 13.7122C8.65497 13.6564 8.45503 13.6843 8.3503 13.7495C7.16018 14.4756 5.9891 15.2296 4.79898 15.965C3.98969 16.4677 3.00903 16.0674 2.82813 15.1738C2.79005 14.9876 2.80909 14.7735 2.8567 14.5873C3.18993 13.2468 3.53269 11.9062 3.89448 10.5657C3.95161 10.3423 3.904 10.2306 3.74215 10.091C2.69484 9.24382 1.65706 8.39668 0.619269 7.54955C0.0765739 7.10271 -0.104325 6.61863 0.0860949 6.0787C0.276514 5.52946 0.695437 5.2595 1.40951 5.21295C2.75197 5.12917 4.09442 5.03608 5.43688 4.9616C5.68443 4.95229 5.78916 4.8592 5.86532 4.64509C6.36041 3.37904 6.86503 2.113 7.37916 0.846952C7.58862 0.307021 8.02659 -0.000181404 8.56928 -0.000181404ZM16.0528 3.90036C16.0147 3.90036 15.9766 3.90036 15.9385 3.90036C15.8814 4.01207 15.8243 4.12378 15.7767 4.23549C15.2435 5.5667 14.7008 6.8886 14.1867 8.22912C14.0248 8.66665 13.7582 8.84352 13.2917 8.86214C11.835 8.92731 10.3687 9.02971 8.91204 9.1228C8.80731 9.13211 8.69305 9.18796 8.58832 9.21589C8.65497 9.31829 8.70257 9.43 8.79778 9.50447C9.9403 10.4447 11.0733 11.3756 12.2253 12.2972C12.5586 12.5672 12.6347 12.8465 12.5205 13.2468C12.1396 14.6524 11.7778 16.0581 11.4161 17.4638C11.3875 17.5755 11.4065 17.7058 11.4065 17.8269C11.5208 17.7896 11.6541 17.771 11.7493 17.7152C13.0061 16.9332 14.2628 16.1605 15.5005 15.3599C15.8528 15.1365 16.1385 15.1458 16.4812 15.3692C17.7189 16.1698 18.9757 16.9425 20.2325 17.7245C20.3277 17.7803 20.4419 17.8082 20.5467 17.8455C20.5562 17.7245 20.5847 17.6034 20.5657 17.501C20.2039 16.0674 19.8326 14.6431 19.4518 13.2095C19.3565 12.8372 19.4327 12.5765 19.7469 12.3252C20.8989 11.4035 22.0415 10.4726 23.1745 9.5324C23.2697 9.45793 23.3268 9.33691 23.403 9.24382C23.2887 9.20658 23.1745 9.14142 23.0602 9.13211C21.6035 9.03902 20.1373 8.93661 18.6806 8.86214C18.2235 8.84352 17.976 8.66665 17.8141 8.24774C17.3 6.90722 16.7573 5.58532 16.2241 4.25411C16.1765 4.1424 16.1099 4.02138 16.0528 3.90036ZM8.62641 1.11692C8.58832 1.11692 8.55024 1.11692 8.51216 1.11692C8.45503 1.22863 8.3979 1.34034 8.3503 1.45205C7.8076 2.80188 7.25539 4.15171 6.73173 5.51084C6.5794 5.89252 6.35089 6.05078 5.94149 6.0787C4.45622 6.16249 2.97095 6.25558 1.4952 6.34867C1.38095 6.35798 1.27622 6.41383 1.17149 6.44176C1.23813 6.54416 1.29526 6.65587 1.38095 6.73034C2.52346 7.67057 3.65646 8.60149 4.8085 9.52309C5.13221 9.77444 5.2179 10.0444 5.11317 10.4354C4.73233 11.8504 4.37053 13.2654 4.00874 14.6897C3.98017 14.8014 4.00874 14.9317 4.00874 15.0434C4.12299 15.0062 4.25628 14.9876 4.35149 14.9224C5.61778 14.1404 6.87455 13.3492 8.13132 12.5486C8.43599 12.3531 8.7121 12.3438 9.01677 12.5393C9.63563 12.9489 10.2735 13.3305 10.9019 13.7308C10.9876 13.7867 11.0733 13.8239 11.178 13.8705C11.2161 13.7588 11.2256 13.675 11.2542 13.6005C11.4351 13.2188 11.2923 12.9861 10.9686 12.7254C9.94982 11.9342 8.96916 11.115 7.96946 10.2958C7.47437 9.89546 7.31251 9.40207 7.49341 8.87145C7.67431 8.34083 8.10275 8.04294 8.74066 8.0057C10.1212 7.92192 11.4922 7.83813 12.8728 7.73573C12.987 7.72642 13.1489 7.67057 13.187 7.5961C13.3869 7.14926 13.5583 6.69311 13.7487 6.19972C12.8632 6.14387 12.0254 6.08801 11.1875 6.05078C10.7972 6.03216 10.5592 5.8739 10.4163 5.51084C9.8927 4.15171 9.34048 2.80188 8.79778 1.45205C8.75018 1.34965 8.68353 1.23794 8.62641 1.11692ZM20.8704 13.8798C21.5654 13.4423 22.27 13.0233 22.9555 12.5672C23.2887 12.3438 23.5743 12.3624 23.9076 12.5765C25.1643 13.3771 26.4211 14.1684 27.6874 14.9503C27.7731 15.0062 27.8969 15.0155 28.0016 15.0527C28.0016 14.941 28.0301 14.8293 28.0016 14.7269C27.6398 13.2933 27.278 11.869 26.8876 10.4354C26.7829 10.0444 26.8686 9.78375 27.1923 9.52309C28.3443 8.60149 29.4869 7.67057 30.6199 6.73034C30.7055 6.65587 30.7627 6.53485 30.8293 6.44176C30.7246 6.41383 30.6199 6.35798 30.5056 6.34867C29.0203 6.25558 27.5351 6.15318 26.0498 6.0787C25.6404 6.06008 25.4024 5.90183 25.2595 5.51084C24.7359 4.15171 24.1837 2.80188 23.641 1.45205C23.5934 1.33103 23.5172 1.21932 23.4125 1.03314C23.3077 1.23794 23.2411 1.34965 23.1935 1.47998C22.6698 2.79257 22.1271 4.08654 21.6321 5.40844C21.4512 5.88321 21.175 6.0787 20.6609 6.08801C19.8707 6.10663 19.0804 6.1811 18.2426 6.22765C18.4425 6.72103 18.6044 7.17718 18.8043 7.62402C18.8329 7.6985 18.9852 7.75435 19.09 7.75435C20.4515 7.84744 21.8225 7.94053 23.184 8.02432C23.898 8.07086 24.317 8.34083 24.4979 8.89938C24.6788 9.44862 24.5074 9.92339 23.9552 10.3702C23.0316 11.1243 22.1367 11.9062 21.175 12.6137C20.699 12.9675 20.4991 13.3026 20.8704 13.8798Z"
                                  fill="#FDBD5D"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0_1092_6259">
                                <rect width="32" height="19" fill="white"></rect>
                            </clipPath>
                        </defs>
                    </svg>
                    <span>{{ $btn_text }}</span></a>
            </div>
            <div class="item-ins green">
                <div class="box-profiles">
                    <figure><img src="{{ asset('student/images/blocktop_icon2.svg') }}" alt="チケット数"></figure>
                    <div class="text">
                        <h3>チケット数</h3>
                        <p><span class="point"> {!! is_numeric( $_user->ticket ) ? $_user->ticket.'枚' : $_user->ticket  !!} </span> </p>
                    </div>
                </div>

            @if( $_user->can('buyPoint', App\Model\User::class) )
                <div class="btn btn-border green" onclick="$('#buyticket').modal('show');">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="23" viewBox="0 0 18 23" fill="none">
                        <g clip-path="url(#clip0_1092_6245)">
                            <path d="M3.66381 6.13333C3.53001 4.24222 4.04611 2.60667 5.47337 1.33528C6.48647 0.434444 7.68434 0 9.03514 0C10.0737 0 11.0295 0.2875 11.9024 0.856111C12.7817 1.42472 13.4316 2.19139 13.8776 3.14333C14.3173 4.08889 14.4001 5.08556 14.3491 6.13333C14.8397 6.13333 15.2985 6.13333 15.7573 6.13333C16.3307 6.13333 16.6047 6.37611 16.662 6.95111C16.9169 9.50667 17.1718 12.0622 17.4266 14.6242C17.6178 16.5728 17.8281 18.515 18.0001 20.4636C18.1212 21.8564 17.0698 22.9936 15.6744 23C11.2334 23.0064 6.78593 23.0064 2.34487 23C0.955846 23 -0.101853 21.8564 0.0192087 20.47C0.153014 18.8728 0.331421 17.2756 0.484342 15.6783C0.63089 14.1833 0.783811 12.6947 0.930359 11.1997C1.07691 9.74944 1.21708 8.29278 1.36363 6.8425C1.40824 6.42722 1.71408 6.14611 2.13461 6.13972C2.62523 6.12694 3.12859 6.13333 3.66381 6.13333ZM15.1966 7.67944C11.0486 7.67944 6.93886 7.67944 2.81638 7.67944C2.81001 7.73694 2.79726 7.78806 2.79089 7.83278C2.62523 9.50028 2.46593 11.1678 2.30027 12.8353C2.0454 15.3972 1.79054 17.9656 1.53567 20.5275C1.4847 21.0706 1.82877 21.4667 2.37036 21.4667C6.79868 21.4667 11.2206 21.4667 15.6489 21.4667C16.1842 21.4667 16.5346 21.0578 16.4773 20.5275C16.439 20.1378 16.4008 19.7481 16.3626 19.3583C16.2097 17.8506 16.0631 16.3428 15.9102 14.835C15.7445 13.1547 15.5725 11.4681 15.4068 9.78778C15.3367 9.085 15.2666 8.38861 15.1966 7.67944ZM5.19301 6.11417C7.74169 6.11417 10.2776 6.11417 12.8072 6.11417C13.113 3.0475 10.8957 1.54611 9.03514 1.52694C7.20009 1.50139 4.88717 2.97083 5.19301 6.11417Z"
                                  fill="#00A29A"></path>
                            <path d="M9.78099 10.0882C10.947 10.5226 11.6606 11.4618 11.6734 12.5735C11.6797 13.0399 11.3739 13.3976 10.9406 13.4104C10.5074 13.4232 10.176 13.0974 10.1505 12.631C10.1123 11.9665 9.61532 11.481 8.97816 11.4938C8.36647 11.5065 7.86311 12.0176 7.86311 12.6374C7.86311 13.2763 8.3601 13.7682 9.01639 13.7938C10.3544 13.8385 11.4249 14.7329 11.6351 15.9788C11.8582 17.2949 11.1891 18.4768 9.92754 18.9752C9.81922 19.0199 9.77461 19.0646 9.76824 19.1924C9.73638 19.6204 9.41143 19.9271 9.00364 19.9207C8.6086 19.9143 8.27727 19.614 8.25178 19.1988C8.24541 19.0454 8.17532 19.0071 8.05426 18.956C7.05391 18.579 6.3594 17.6015 6.33391 16.5538C6.32117 16.081 6.62064 15.7296 7.05391 15.704C7.49993 15.6785 7.83125 16.0043 7.86311 16.4963C7.90134 17.1671 8.43019 17.6527 9.07373 17.6207C9.69815 17.5888 10.1824 17.0457 10.1569 16.4196C10.1314 15.8126 9.64081 15.3463 9.01001 15.3271C8.01603 15.2951 7.23232 14.8735 6.70984 14.011C5.85604 12.5926 6.50595 10.7335 8.05426 10.1457C8.13072 10.1138 8.2263 10.0243 8.23904 9.95403C8.30276 9.48125 8.60223 9.18097 9.02913 9.19375C9.44966 9.20653 9.74276 9.51959 9.77461 9.99875C9.76824 10.0243 9.77461 10.0499 9.78099 10.0882Z"
                                  fill="#00A29A"></path>
                        </g>
                        <defs>
                            <clipPath id="clip0_1092_6245">
                                <rect width="18" height="23" fill="white"></rect>
                            </clipPath>
                        </defs>
                    </svg>
                    <span>購入する</span>
                </div>
            @endif

            </div>
            <div class="item-ins purple">
                <div class="box-profiles">
                    <figure><img src="{{ asset('images/blocktop_icon4.svg') }}" alt="利用ガイド"></figure>
                    <div class="text">
                        <h3>利用ガイド</h3>
                    </div>
                </div>
                <a download href="{{ asset('student/images/user_guide.pdf') }}">
                    <div class="btn btn-border purple">
                        <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16.6296 10.0413L15.9953 9.43851L16.6296 10.0413ZM8.52162 17.8108L7.88733 18.4135L8.52162 17.8108ZM9.24653 17.8108L8.61224 17.208L9.24653 17.8108ZM1.13854 10.0413L0.50425 10.644L1.13854 10.0413ZM5.83105 1.875H11.9377V0.125H5.83105V1.875ZM6.20605 8.69683V1.5H4.45605V8.69683H6.20605ZM1.501 10.0718H4.83105V8.32183H1.501V10.0718ZM9.15591 17.208L1.77283 9.43851L0.50425 10.644L7.88733 18.4135L9.15591 17.208ZM15.9953 9.43851L8.61224 17.208L9.88082 18.4135L17.2639 10.644L15.9953 9.43851ZM12.9377 10.0718H16.2672V8.32183H12.9377V10.0718ZM11.5627 1.5V8.69683H13.3127V1.5H11.5627ZM12.9377 8.32183C13.1448 8.32183 13.3127 8.48972 13.3127 8.69683H11.5627C11.5627 9.45622 12.1783 10.0718 12.9377 10.0718V8.32183ZM17.2639 10.644C18.0961 9.7682 17.4753 8.32183 16.2672 8.32183V10.0718C15.9377 10.0718 15.7683 9.67737 15.9953 9.43851L17.2639 10.644ZM7.88733 18.4135C8.4294 18.984 9.33875 18.984 9.88082 18.4135L8.61224 17.208C8.76007 17.0525 9.00807 17.0525 9.15591 17.208L7.88733 18.4135ZM1.501 8.32183C0.29284 8.32183 -0.327995 9.76819 0.50425 10.644L1.77283 9.43851C1.99981 9.67737 1.83049 10.0718 1.501 10.0718V8.32183ZM4.45605 8.69683C4.45605 8.48972 4.62395 8.32183 4.83105 8.32183V10.0718C5.59045 10.0718 6.20605 9.45622 6.20605 8.69683H4.45605ZM11.9377 1.875C11.7306 1.875 11.5627 1.70711 11.5627 1.5H13.3127C13.3127 0.740609 12.6971 0.125 11.9377 0.125V1.875ZM5.83105 0.125C5.07166 0.125 4.45605 0.740608 4.45605 1.5H6.20605C6.20605 1.70711 6.03816 1.875 5.83105 1.875V0.125Z" fill="#8795DE"/>
                            <defs>
                                <clipPath id="clip0_1092_6245">
                                    <rect width="18" height="19" fill="white"></rect>
                                </clipPath>
                            </defs>
                        </svg>
                        <span>ダウンロード</span>
                    </div>
                </a>
            </div>
            <div class="item-ins red">
                <div class="box-profiles">
                    <figure><img src="{{ asset('student/images/blocktop_icon3.svg') }}" alt="リクエスト総数"></figure>
                    <div class="text">
                        <h3>リクエスト総数</h3>
                        <p>{{ $_user->request }}件</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </section>
    <section class="section2">
        <div class="block-banners">
            <div class="banner-item">
                <h3>先生に動画をリクエストする</h3>
                <div class="box-wrapper">
                    <div class="box"><a class="btn btn-black" href="{{ route('student.teacher.index') }}">先生に動画をリクエストする</a><a class="btn btn-green" href="{{ route('student.request.create') }}"><img
                                    src="{{ asset('student/images/request.svg') }}"
                                    alt="リクエスト作成"><span>リクエスト作成</span></a></div>
                </div>
            </div>
            <div class="banner-item">
                <h3>みんなの解説動画を見る</h3>
                <div class="box-wrapper">
                    <div class="box"><a class="btn btn-black" href="{{ route('student.video.list') }}">みんなの解説動画を見る</a></div>
                </div>
            </div>
        </div>
    </section>
    <section class="section3">
        <ul class="list-links">
            <li><a href="{{ route('student.faq.user_guide') }}">ご利用ガイド</a></li>
            <li><a href="{{ route('student.faq.question') }}">よくある質問</a></li>
            <li><a href="{{ route('student.faq.policy') }}">プライバシーポリシー</a></li>
            <li><a href="{{ route('student.faq.law') }}">特定商取引法に基づく表記</a></li>
        </ul>
    </section>
@endsection

@section('custom_js')
    <script>
        // let URI_CHAT = @JSON(route('ajax.chat'));

        // axios.post(URI_CHAT,{
        //                   user_to: 1,
        //                   user_from: 10,
        //                   message_id: 1,
        //                   message: 'phuhong _ test abc 456',
        //                   path: null,
        //                   _token:_token
        //     }).then(function(output){
        //             console.log(output);
        //     });

    </script>
@endsection
